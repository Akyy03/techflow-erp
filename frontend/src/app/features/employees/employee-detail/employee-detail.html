<div style="padding: 40px; max-width: 1300px; margin: 0 auto; color: white">
  <div
    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 40px"
  >
    <div style="display: flex; align-items: center; gap: 20px">
      <button (click)="goBack()" class="back-btn">
        <div class="back-icon-circle">
          <svg
            width="14"
            height="14"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M19 12H5M12 19l-7-7 7-7" />
          </svg>
        </div>
      </button>
      <h1 style="margin: 0; font-size: 1.8rem; font-weight: 800; letter-spacing: -1px">
        EMPLOYEE <span style="color: #6366f1">FILE</span>
      </h1>
    </div>
    <div class="dept-badge" style="font-size: 0.9rem; padding: 8px 16px">
      ID: #{{ employee()?.id }}
    </div>
  </div>

  @if (employee()) {
    <div class="detail-grid">
      <div
        class="bento-card"
        style="
          grid-row: span 2;
          display: flex;
          flex-direction: column;
          align-items: center;
          padding: 40px;
        "
      >
        <div
          style="
            width: 140px;
            height: 140px;
            background: linear-gradient(135deg, #6366f1, #a855f7);
            border-radius: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
          "
        >
          {{ employee()?.firstName?.[0] }}
        </div>
        <h2 style="font-size: 1.8rem; margin: 0">
          {{ employee()?.firstName }} {{ employee()?.lastName }}
        </h2>
        <p style="color: #64748b; font-weight: 600; margin-top: 10px">{{ employee()?.position }}</p>

        <div
          style="width: 100%; margin-top: 40px; display: flex; flex-direction: column; gap: 20px"
        >
          <div class="info-box">
            <p class="tf-label">Status</p>
            <div
              style="display: flex; align-items: center; gap: 8px; color: #10b981; font-weight: 700"
            >
              <span style="width: 8px; height: 8px; background: #10b981; border-radius: 50%"></span>
              ACTIVE ROLE
            </div>
          </div>
        </div>
      </div>

      <div class="bento-card">
        <p class="tf-label">Salary & Compensation</p>
        <div class="data-value highlight-purple" style="font-size: 2rem">
          {{ employee()?.salary | currency: 'EUR' }}
        </div>
        <p style="font-size: 0.8rem; color: #475569; margin-top: 5px">Monthly Income</p>
      </div>

      <div class="bento-card">
        <p class="tf-label">Department</p>
        <div class="data-value" style="color: #818cf8">
          {{ employee()?.departmentName || employee()?.department?.name || 'Unassigned' }}
        </div>
        <p style="font-size: 0.8rem; color: #475569; margin-top: 5px">Organizational Unit</p>
      </div>

      <div
        class="bento-card"
        style="grid-column: span 2; display: grid; grid-template-columns: 1fr 1fr; gap: 30px"
      >
        <div>
          <p class="tf-label">Primary Email</p>
          <div class="data-value" style="font-family: 'JetBrains Mono'">
            {{ employee()?.email }}
          </div>
          <p class="tf-label" style="margin-top: 25px">Phone Number</p>
          <div class="data-value">{{ employee()?.phone || 'Not Provided' }}</div>
        </div>
        <div style="border-left: 1px solid rgba(255, 255, 255, 0.05); padding-left: 30px">
          <p class="tf-label">Hire Date</p>
          <div class="data-value">{{ employee()?.hireDate | date: 'longDate' }}</div>
          <p class="tf-label" style="margin-top: 25px">Seniority</p>
          <div class="data-value">{{ getSeniority(employee()?.hireDate) }}</div>
        </div>
      </div>
    </div>

    <div class="admin-control-card" style="margin-top: 30px">
      <div class="status-info">
        <span class="tf-label">CURRENT AUTHORITY LEVEL</span>
        <h3 [style.color]="employee()?.role === 'MANAGER' ? '#818cf8' : '#94a3b8'">
          {{ employee()?.role || 'NOT SET' }}
        </h3>
      </div>

      @if (employee()?.role === 'MANAGER') {
        <button (click)="changeRole('EMPLOYEE')" class="tf-btn-demote">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              d="M19 9l-7 7-7-7"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          DEMOTE TO STAFF
        </button>
      } @else {
        <button (click)="changeRole('MANAGER')" class="tf-btn-promote">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              d="M5 15l7-7 7 7"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          PROMOTE TO MANAGER
        </button>
      }
    </div>
  } @else {
    <div class="bento-card" style="padding: 100px; text-align: center; color: #64748b">
      <div class="spinner"></div>
      Retrieving employee metadata...
    </div>
  }

  @if (employee()?.temporaryPassword) {
    <div
      class="bento-card"
      style="
        margin-top: 30px;
        border: 1px dashed #6366f1;
        background: rgba(99, 102, 241, 0.05);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 25px;
      "
    >
      <div style="display: flex; gap: 20px; align-items: center">
        <div
          style="
            width: 50px;
            height: 50px;
            border-radius: 15px;
            background: rgba(99, 102, 241, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6366f1;
          "
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3-3.5 3.5z"
            ></path>
          </svg>
        </div>
        <div>
          <p class="tf-label" style="margin: 0; color: #818cf8">
            ACTION REQUIRED: INITIAL ONBOARDING
          </p>
          <p style="margin: 5px 0 0 0; font-size: 0.9rem; color: #94a3b8">
            Provide this temporary password to the employee.
          </p>
        </div>
      </div>

      <div
        style="
          display: flex;
          align-items: center;
          gap: 15px;
          background: rgba(0, 0, 0, 0.2);
          padding: 10px 20px;
          border-radius: 12px;
          border: 1px solid rgba(255, 255, 255, 0.05);
        "
      >
        <code
          style="
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            color: #e2e8f0;
            letter-spacing: 2px;
          "
        >
          {{ showPassword() ? employee()?.temporaryPassword : '••••••••••' }}
        </code>

        <div
          style="
            display: flex;
            gap: 10px;
            margin-left: 10px;
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            padding-left: 15px;
          "
        >
          <button
            (click)="togglePassword()"
            style="background: none; border: none; color: #64748b; cursor: pointer; padding: 5px"
            title="Toggle Visibility"
          >
            @if (showPassword()) {
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"
                ></path>
                <line x1="1" y1="1" x2="23" y2="23"></line>
              </svg>
            } @else {
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            }
          </button>

          <button
            (click)="copyToClipboard(employee()?.temporaryPassword)"
            style="background: none; border: none; color: #64748b; cursor: pointer; padding: 5px"
            title="Copy to Clipboard"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  }
</div>
